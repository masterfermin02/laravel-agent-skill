[
  {
    "id": "SRP-001",
    "title": "Single Responsibility Principle",
    "severity_default": "high",
    "signals": [
      "Class handles validation + persistence + external API calls",
      "Controller methods exceed 80 lines or contain multiple distinct concerns"
    ],
    "recommended_pattern": [
      "Extract FormRequest for validation",
      "Extract Service/Action for business logic",
      "Extract repository/client for external integrations"
    ],
    "examples": {
      "bad": "Controller validates, writes to DB, calls external API, transforms response",
      "good": "Controller delegates to service; request handles validation; service returns result DTO"
    },
    "reference": {
      "repo": "alexeymezenin/laravel-best-practices",
      "topic": "Single responsibility principle"
    }
  },
  {
    "id": "FUNC-001",
    "title": "Methods should do one thing",
    "severity_default": "medium",
    "signals": [
      "Deep nesting, multiple loops/branches, and multiple unrelated side effects in one method",
      "Method exceeds 40 lines without clear decomposition"
    ],
    "recommended_pattern": [
      "Extract private methods with meaningful names",
      "Extract small domain services/actions",
      "Use early returns to reduce nesting"
    ],
    "reference": {
      "repo": "alexeymezenin/laravel-best-practices",
      "topic": "Methods should do just one thing"
    }
  },
  {
    "id": "MVC-001",
    "title": "Skinny controllers; move logic out",
    "severity_default": "high",
    "signals": [
      "Controller builds complex queries and performs business decisions",
      "Controller transforms models into arrays manually (instead of resources/DTOs)"
    ],
    "recommended_pattern": [
      "Move query composition into Eloquent scopes or dedicated query objects",
      "Move business decisions into service/action classes",
      "Use API resources for response transformation"
    ],
    "reference": {
      "repo": "alexeymezenin/laravel-best-practices",
      "topic": "Fat models, skinny controllers"
    }
  },
  {
    "id": "VAL-001",
    "title": "Validation belongs in FormRequest classes",
    "severity_default": "high",
    "signals": [
      "Controller uses $request->validate(...)",
      "Validation arrays are defined inline in controllers"
    ],
    "recommended_pattern": [
      "Create a FormRequest with rules() and authorize()",
      "Typehint the FormRequest in the controller action",
      "Use validated() data and/or DTO mapping"
    ],
    "reference": {
      "repo": "alexeymezenin/laravel-best-practices",
      "topic": "Validation"
    }
  },
  {
    "id": "SVC-001",
    "title": "Business logic should live in service/action classes",
    "severity_default": "high",
    "signals": [
      "Business rules live inside controllers/models in hard-to-test ways",
      "Multiple steps (pricing, eligibility, side effects) in one layer"
    ],
    "recommended_pattern": [
      "Create a service/action class with a single public method (handle/execute)",
      "Inject dependencies via constructor",
      "Return a result object/DTO (or domain model) rather than arrays"
    ],
    "reference": {
      "repo": "alexeymezenin/laravel-best-practices",
      "topic": "Business logic should be in service class"
    }
  },
  {
    "id": "DRY-001",
    "title": "Don't repeat yourself (DRY)",
    "severity_default": "medium",
    "signals": [
      "Duplicate query fragments across multiple controllers/services",
      "Same validation or mapping logic repeated across endpoints"
    ],
    "recommended_pattern": [
      "Use Eloquent scopes for reusable query logic",
      "Extract mapping into resources/DTOs",
      "Create reusable services or helpers for repeated workflows"
    ],
    "reference": {
      "repo": "alexeymezenin/laravel-best-practices",
      "topic": "Don't repeat yourself"
    }
  },
  {
    "id": "ELO-001",
    "title": "Prefer Eloquent + Collections when appropriate",
    "severity_default": "low",
    "signals": [
      "Raw SQL/Query Builder used for routine CRUD without a strong reason",
      "Array manipulation where collection pipelines are clearer"
    ],
    "recommended_pattern": [
      "Model relationships + scopes",
      "Collection pipelines (map/filter/reduce) for readable transforms",
      "Query Builder/raw SQL only when necessary for performance/edge cases"
    ],
    "reference": {
      "repo": "alexeymezenin/laravel-best-practices",
      "topic": "Prefer to use Eloquent over Query Builder and raw SQL queries"
    }
  },
  {
    "id": "BLADE-001",
    "title": "No queries in Blade; eager load to avoid N+1",
    "severity_default": "high",
    "signals": [
      "Model::/DB:: queries inside Blade templates",
      "Loops rendering relationships without eager loading"
    ],
    "recommended_pattern": [
      "Move queries to controller/service layer",
      "Eager load relationships with with()/load()",
      "Use view models/resources to supply already-prepared data"
    ],
    "reference": {
      "repo": "alexeymezenin/laravel-best-practices",
      "topic": "Do not execute queries in Blade templates and use eager loading"
    }
  },
  {
    "id": "PERF-001",
    "title": "Chunk/stream large dataset operations",
    "severity_default": "medium",
    "signals": [
      "Processing large tables with get() into memory",
      "Long-running loops over many records without chunk/cursor"
    ],
    "recommended_pattern": [
      "Use chunk(), chunkById(), cursor(), lazy()",
      "Move heavy tasks to queued jobs",
      "Add indexes and reduce selected columns"
    ],
    "reference": {
      "repo": "alexeymezenin/laravel-best-practices",
      "topic": "Chunk data for processing"
    }
  }
]